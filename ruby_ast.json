[
  "begin",
  [
    "block",
    [
      "send",
      null,
      "Before"
    ],
    [
      "args"
    ],
    [
      "begin",
      [
        "if",
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "test_dir"
          ],
          "exist?"
        ],
        [
          "send",
          [
            "const",
            null,
            "FileUtils"
          ],
          "rm_rf",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "test_dir"
          ]
        ],
        null
      ],
      [
        "if",
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "test_dir"
          ],
          "directory?"
        ],
        null,
        [
          "send",
          [
            "const",
            null,
            "FileUtils"
          ],
          "mkdir_p",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "test_dir"
          ]
        ]
      ],
      [
        "send",
        [
          "const",
          null,
          "Dir"
        ],
        "chdir",
        [
          "send",
          [
            "const",
            null,
            "Paths"
          ],
          "test_dir"
        ]
      ],
      [
        "ivasgn",
        "@timezone_before_scenario",
        [
          "index",
          [
            "const",
            null,
            "ENV"
          ],
          [
            "str",
            "TZ"
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "After"
    ],
    [
      "args"
    ],
    [
      "begin",
      [
        "if",
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "test_dir"
          ],
          "exist?"
        ],
        [
          "send",
          [
            "const",
            null,
            "FileUtils"
          ],
          "rm_rf",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "test_dir"
          ]
        ],
        null
      ],
      [
        "if",
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "output_file"
          ],
          "exist?"
        ],
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "output_file"
          ],
          "delete"
        ],
        null
      ],
      [
        "if",
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "status_file"
          ],
          "exist?"
        ],
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "status_file"
          ],
          "delete"
        ],
        null
      ],
      [
        "send",
        [
          "const",
          null,
          "Dir"
        ],
        "chdir",
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "test_dir"
          ],
          "parent"
        ]
      ],
      [
        "indexasgn",
        [
          "const",
          null,
          "ENV"
        ],
        [
          "str",
          "TZ"
        ],
        [
          "ivar",
          "@timezone_before_scenario"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have a blank site in \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "path"
        ]
      ]
    ],
    [
      "if",
      [
        "send",
        [
          "const",
          null,
          "File"
        ],
        "exist?",
        [
          "lvar",
          "path"
        ]
      ],
      null,
      [
        "send",
        [
          "const",
          null,
          "FileUtils"
        ],
        "mkdir_p",
        [
          "lvar",
          "path"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I do not have a \"(.*)\" directory$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "path"
        ]
      ]
    ],
    [
      "send",
      [
        "send",
        [
          "send",
          [
            "const",
            null,
            "Paths"
          ],
          "test_dir"
        ],
        "join",
        [
          "lvar",
          "path"
        ]
      ],
      "directory?"
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have an? \"(.*)\" page(?: with (.*) \"(.*)\")? that contains \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "file"
      ],
      [
        "arg",
        "key"
      ],
      [
        "arg",
        "value"
      ],
      [
        "arg",
        "text"
      ]
    ],
    [
      "send",
      [
        "const",
        null,
        "File"
      ],
      "write",
      [
        "lvar",
        "file"
      ],
      [
        "dstr",
        [
          "str",
          "---\n"
        ],
        [
          "begin",
          [
            "or",
            [
              "lvar",
              "key"
            ],
            [
              "str",
              "layout"
            ]
          ]
        ],
        [
          "str",
          ": "
        ],
        [
          "begin",
          [
            "or",
            [
              "lvar",
              "value"
            ],
            [
              "str",
              "none"
            ]
          ]
        ],
        [
          "str",
          "\n"
        ],
        [
          "str",
          "---\n"
        ],
        [
          "str",
          "\n"
        ],
        [
          "begin",
          [
            "lvar",
            "text"
          ]
        ],
        [
          "str",
          "\n"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have an? \"(.*)\" file that contains \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "file"
      ],
      [
        "arg",
        "text"
      ]
    ],
    [
      "send",
      [
        "const",
        null,
        "File"
      ],
      "write",
      [
        "lvar",
        "file"
      ],
      [
        "lvar",
        "text"
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have an? (.*) (layout|theme) that contains \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "name"
      ],
      [
        "arg",
        "type"
      ],
      [
        "arg",
        "text"
      ]
    ],
    [
      "begin",
      [
        "lvasgn",
        "folder",
        [
          "if",
          [
            "send",
            [
              "lvar",
              "type"
            ],
            "==",
            [
              "str",
              "layout"
            ]
          ],
          [
            "str",
            "_layouts"
          ],
          [
            "str",
            "_theme"
          ]
        ]
      ],
      [
        "lvasgn",
        "destination_file",
        [
          "send",
          [
            "const",
            null,
            "Pathname"
          ],
          "new",
          [
            "send",
            [
              "const",
              null,
              "File"
            ],
            "join",
            [
              "lvar",
              "folder"
            ],
            [
              "dstr",
              [
                "begin",
                [
                  "lvar",
                  "name"
                ]
              ],
              [
                "str",
                ".html"
              ]
            ]
          ]
        ]
      ],
      [
        "if",
        [
          "send",
          [
            "send",
            [
              "lvar",
              "destination_file"
            ],
            "parent"
          ],
          "directory?"
        ],
        null,
        [
          "send",
          [
            "const",
            null,
            "FileUtils"
          ],
          "mkdir_p",
          [
            "send",
            [
              "lvar",
              "destination_file"
            ],
            "parent"
          ]
        ]
      ],
      [
        "send",
        [
          "const",
          null,
          "File"
        ],
        "write",
        [
          "lvar",
          "destination_file"
        ],
        [
          "lvar",
          "text"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have an? \"(.*)\" file with content:$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "file"
      ],
      [
        "arg",
        "text"
      ]
    ],
    [
      "send",
      [
        "const",
        null,
        "File"
      ],
      "write",
      [
        "lvar",
        "file"
      ],
      [
        "lvar",
        "text"
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have an? \"(.*)\" page with content:$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "file"
      ],
      [
        "arg",
        "text"
      ]
    ],
    [
      "send",
      [
        "const",
        null,
        "File"
      ],
      "write",
      [
        "lvar",
        "file"
      ],
      [
        "dstr",
        [
          "str",
          "---\n"
        ],
        [
          "str",
          "---\n"
        ],
        [
          "str",
          "\n"
        ],
        [
          "begin",
          [
            "lvar",
            "text"
          ]
        ],
        [
          "str",
          "\n"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have an? (.*) directory$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "dir"
        ]
      ]
    ],
    [
      "if",
      [
        "send",
        [
          "const",
          null,
          "File"
        ],
        "directory?",
        [
          "lvar",
          "dir"
        ]
      ],
      null,
      [
        "send",
        [
          "const",
          null,
          "FileUtils"
        ],
        "mkdir_p",
        [
          "lvar",
          "dir"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have the following (draft|page|post)s?(?: (in|under) \"([^\"]+)\")?:$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "status"
      ],
      [
        "arg",
        "direction"
      ],
      [
        "arg",
        "folder"
      ],
      [
        "arg",
        "table"
      ]
    ],
    [
      "block",
      [
        "send",
        [
          "send",
          [
            "lvar",
            "table"
          ],
          "hashes"
        ],
        "each"
      ],
      [
        "args",
        [
          "procarg0",
          [
            "arg",
            "input_hash"
          ]
        ]
      ],
      [
        "begin",
        [
          "lvasgn",
          "title",
          [
            "send",
            null,
            "slug",
            [
              "index",
              [
                "lvar",
                "input_hash"
              ],
              [
                "str",
                "title"
              ]
            ]
          ]
        ],
        [
          "lvasgn",
          "ext",
          [
            "or",
            [
              "index",
              [
                "lvar",
                "input_hash"
              ],
              [
                "str",
                "type"
              ]
            ],
            [
              "str",
              "markdown"
            ]
          ]
        ],
        [
          "if",
          [
            "send",
            [
              "array",
              [
                "str",
                "draft"
              ],
              [
                "str",
                "page"
              ]
            ],
            "include?",
            [
              "lvar",
              "status"
            ]
          ],
          [
            "lvasgn",
            "filename",
            [
              "dstr",
              [
                "begin",
                [
                  "lvar",
                  "title"
                ]
              ],
              [
                "str",
                "."
              ],
              [
                "begin",
                [
                  "lvar",
                  "ext"
                ]
              ]
            ]
          ],
          null
        ],
        [
          "masgn",
          [
            "mlhs",
            [
              "lvasgn",
              "before"
            ],
            [
              "lvasgn",
              "after"
            ]
          ],
          [
            "send",
            null,
            "location",
            [
              "lvar",
              "folder"
            ],
            [
              "lvar",
              "direction"
            ]
          ]
        ],
        [
          "if",
          [
            "send",
            [
              "lvar",
              "status"
            ],
            "==",
            [
              "str",
              "draft"
            ]
          ],
          [
            "lvasgn",
            "dest_folder",
            [
              "str",
              "_drafts"
            ]
          ],
          null
        ],
        [
          "if",
          [
            "send",
            [
              "lvar",
              "status"
            ],
            "==",
            [
              "str",
              "post"
            ]
          ],
          [
            "lvasgn",
            "dest_folder",
            [
              "str",
              "_posts"
            ]
          ],
          null
        ],
        [
          "if",
          [
            "send",
            [
              "lvar",
              "status"
            ],
            "==",
            [
              "str",
              "page"
            ]
          ],
          [
            "lvasgn",
            "dest_folder",
            [
              "str",
              ""
            ]
          ],
          null
        ],
        [
          "if",
          [
            "send",
            [
              "lvar",
              "status"
            ],
            "==",
            [
              "str",
              "post"
            ]
          ],
          [
            "begin",
            [
              "lvasgn",
              "parsed_date",
              [
                "rescue",
                [
                  "send",
                  [
                    "const",
                    null,
                    "Time"
                  ],
                  "xmlschema",
                  [
                    "index",
                    [
                      "lvar",
                      "input_hash"
                    ],
                    [
                      "str",
                      "date"
                    ]
                  ]
                ],
                [
                  "resbody",
                  null,
                  null,
                  [
                    "send",
                    [
                      "const",
                      null,
                      "Time"
                    ],
                    "parse",
                    [
                      "index",
                      [
                        "lvar",
                        "input_hash"
                      ],
                      [
                        "str",
                        "date"
                      ]
                    ]
                  ]
                ],
                null
              ]
            ],
            [
              "indexasgn",
              [
                "lvar",
                "input_hash"
              ],
              [
                "str",
                "date"
              ],
              [
                "lvar",
                "parsed_date"
              ]
            ],
            [
              "lvasgn",
              "filename",
              [
                "dstr",
                [
                  "begin",
                  [
                    "send",
                    [
                      "lvar",
                      "parsed_date"
                    ],
                    "strftime",
                    [
                      "str",
                      "%Y-%m-%d"
                    ]
                  ]
                ],
                [
                  "str",
                  "-"
                ],
                [
                  "begin",
                  [
                    "lvar",
                    "title"
                  ]
                ],
                [
                  "str",
                  "."
                ],
                [
                  "begin",
                  [
                    "lvar",
                    "ext"
                  ]
                ]
              ]
            ]
          ],
          null
        ],
        [
          "lvasgn",
          "path",
          [
            "send",
            [
              "const",
              null,
              "File"
            ],
            "join",
            [
              "lvar",
              "before"
            ],
            [
              "lvar",
              "dest_folder"
            ],
            [
              "lvar",
              "after"
            ],
            [
              "lvar",
              "filename"
            ]
          ]
        ],
        [
          "send",
          [
            "const",
            null,
            "File"
          ],
          "write",
          [
            "lvar",
            "path"
          ],
          [
            "send",
            null,
            "file_content_from_hash",
            [
              "lvar",
              "input_hash"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have the following (draft|post)s? within the \"(.*)\" directory:$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "type"
      ],
      [
        "arg",
        "folder"
      ],
      [
        "arg",
        "table"
      ]
    ],
    [
      "block",
      [
        "send",
        [
          "send",
          [
            "lvar",
            "table"
          ],
          "hashes"
        ],
        "each"
      ],
      [
        "args",
        [
          "procarg0",
          [
            "arg",
            "input_hash"
          ]
        ]
      ],
      [
        "begin",
        [
          "lvasgn",
          "title",
          [
            "send",
            null,
            "slug",
            [
              "index",
              [
                "lvar",
                "input_hash"
              ],
              [
                "str",
                "title"
              ]
            ]
          ]
        ],
        [
          "lvasgn",
          "parsed_date",
          [
            "rescue",
            [
              "send",
              [
                "const",
                null,
                "Time"
              ],
              "xmlschema",
              [
                "index",
                [
                  "lvar",
                  "input_hash"
                ],
                [
                  "str",
                  "date"
                ]
              ]
            ],
            [
              "resbody",
              null,
              null,
              [
                "send",
                [
                  "const",
                  null,
                  "Time"
                ],
                "parse",
                [
                  "index",
                  [
                    "lvar",
                    "input_hash"
                  ],
                  [
                    "str",
                    "date"
                  ]
                ]
              ]
            ],
            null
          ]
        ],
        [
          "lvasgn",
          "filename",
          [
            "if",
            [
              "send",
              [
                "lvar",
                "type"
              ],
              "==",
              [
                "str",
                "draft"
              ]
            ],
            [
              "dstr",
              [
                "begin",
                [
                  "lvar",
                  "title"
                ]
              ],
              [
                "str",
                ".markdown"
              ]
            ],
            [
              "dstr",
              [
                "begin",
                [
                  "send",
                  [
                    "lvar",
                    "parsed_date"
                  ],
                  "strftime",
                  [
                    "str",
                    "%Y-%m-%d"
                  ]
                ]
              ],
              [
                "str",
                "-"
              ],
              [
                "begin",
                [
                  "lvar",
                  "title"
                ]
              ],
              [
                "str",
                ".markdown"
              ]
            ]
          ]
        ],
        [
          "lvasgn",
          "path",
          [
            "send",
            [
              "const",
              null,
              "File"
            ],
            "join",
            [
              "lvar",
              "folder"
            ],
            [
              "dstr",
              [
                "str",
                "_"
              ],
              [
                "begin",
                [
                  "lvar",
                  "type"
                ]
              ],
              [
                "str",
                "s"
              ]
            ],
            [
              "lvar",
              "filename"
            ]
          ]
        ],
        [
          "send",
          [
            "const",
            null,
            "File"
          ],
          "write",
          [
            "lvar",
            "path"
          ],
          [
            "send",
            null,
            "file_content_from_hash",
            [
              "lvar",
              "input_hash"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have the following documents? under the (.*) collection:$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "folder"
      ],
      [
        "arg",
        "table"
      ]
    ],
    [
      "block",
      [
        "send",
        [
          "send",
          [
            "lvar",
            "table"
          ],
          "hashes"
        ],
        "each"
      ],
      [
        "args",
        [
          "procarg0",
          [
            "arg",
            "input_hash"
          ]
        ]
      ],
      [
        "begin",
        [
          "lvasgn",
          "title",
          [
            "send",
            null,
            "slug",
            [
              "index",
              [
                "lvar",
                "input_hash"
              ],
              [
                "str",
                "title"
              ]
            ]
          ]
        ],
        [
          "lvasgn",
          "filename",
          [
            "dstr",
            [
              "begin",
              [
                "lvar",
                "title"
              ]
            ],
            [
              "str",
              ".md"
            ]
          ]
        ],
        [
          "lvasgn",
          "dest_folder",
          [
            "dstr",
            [
              "str",
              "_"
            ],
            [
              "begin",
              [
                "lvar",
                "folder"
              ]
            ]
          ]
        ],
        [
          "lvasgn",
          "path",
          [
            "send",
            [
              "const",
              null,
              "File"
            ],
            "join",
            [
              "lvar",
              "dest_folder"
            ],
            [
              "lvar",
              "filename"
            ]
          ]
        ],
        [
          "send",
          [
            "const",
            null,
            "File"
          ],
          "write",
          [
            "lvar",
            "path"
          ],
          [
            "send",
            null,
            "file_content_from_hash",
            [
              "lvar",
              "input_hash"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have the following documents? under the \"(.*)\" collection within the \"(.*)\" directory:$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "label"
      ],
      [
        "arg",
        "dir"
      ],
      [
        "arg",
        "table"
      ]
    ],
    [
      "block",
      [
        "send",
        [
          "send",
          [
            "lvar",
            "table"
          ],
          "hashes"
        ],
        "each"
      ],
      [
        "args",
        [
          "procarg0",
          [
            "arg",
            "input_hash"
          ]
        ]
      ],
      [
        "begin",
        [
          "lvasgn",
          "title",
          [
            "send",
            null,
            "slug",
            [
              "index",
              [
                "lvar",
                "input_hash"
              ],
              [
                "str",
                "title"
              ]
            ]
          ]
        ],
        [
          "lvasgn",
          "path",
          [
            "send",
            [
              "const",
              null,
              "File"
            ],
            "join",
            [
              "lvar",
              "dir"
            ],
            [
              "dstr",
              [
                "str",
                "_"
              ],
              [
                "begin",
                [
                  "lvar",
                  "label"
                ]
              ]
            ],
            [
              "dstr",
              [
                "begin",
                [
                  "lvar",
                  "title"
                ]
              ],
              [
                "str",
                ".md"
              ]
            ]
          ]
        ],
        [
          "send",
          [
            "const",
            null,
            "File"
          ],
          "write",
          [
            "lvar",
            "path"
          ],
          [
            "send",
            null,
            "file_content_from_hash",
            [
              "lvar",
              "input_hash"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have the following documents? nested inside \"(.*)\" directory under the \"(.*)\" collection within the \"(.*)\" directory:$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "subdir"
      ],
      [
        "arg",
        "label"
      ],
      [
        "arg",
        "dir"
      ],
      [
        "arg",
        "table"
      ]
    ],
    [
      "block",
      [
        "send",
        [
          "send",
          [
            "lvar",
            "table"
          ],
          "hashes"
        ],
        "each"
      ],
      [
        "args",
        [
          "procarg0",
          [
            "arg",
            "input_hash"
          ]
        ]
      ],
      [
        "begin",
        [
          "lvasgn",
          "title",
          [
            "send",
            null,
            "slug",
            [
              "index",
              [
                "lvar",
                "input_hash"
              ],
              [
                "str",
                "title"
              ]
            ]
          ]
        ],
        [
          "lvasgn",
          "path",
          [
            "send",
            [
              "const",
              null,
              "File"
            ],
            "join",
            [
              "lvar",
              "dir"
            ],
            [
              "dstr",
              [
                "str",
                "_"
              ],
              [
                "begin",
                [
                  "lvar",
                  "label"
                ]
              ]
            ],
            [
              "lvar",
              "subdir"
            ],
            [
              "dstr",
              [
                "begin",
                [
                  "lvar",
                  "title"
                ]
              ],
              [
                "str",
                ".md"
              ]
            ]
          ]
        ],
        [
          "send",
          [
            "const",
            null,
            "File"
          ],
          "write",
          [
            "lvar",
            "path"
          ],
          [
            "send",
            null,
            "file_content_from_hash",
            [
              "lvar",
              "input_hash"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have a configuration file with \"(.*)\" set to \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "key"
      ],
      [
        "arg",
        "value"
      ]
    ],
    [
      "begin",
      [
        "lvasgn",
        "config",
        [
          "if",
          [
            "send",
            [
              "send",
              [
                "send",
                null,
                "source_dir"
              ],
              "join",
              [
                "str",
                "_config.yml"
              ]
            ],
            "exist?"
          ],
          [
            "send",
            [
              "const",
              null,
              "SafeYAML"
            ],
            "load_file",
            [
              "send",
              [
                "send",
                null,
                "source_dir"
              ],
              "join",
              [
                "str",
                "_config.yml"
              ]
            ]
          ],
          [
            "hash"
          ]
        ]
      ],
      [
        "indexasgn",
        [
          "lvar",
          "config"
        ],
        [
          "lvar",
          "key"
        ],
        [
          "send",
          [
            "const",
            null,
            "SafeYAML"
          ],
          "load",
          [
            "lvar",
            "value"
          ]
        ]
      ],
      [
        "if",
        [
          "send",
          [
            "lvar",
            "key"
          ],
          "==",
          [
            "str",
            "timezone"
          ]
        ],
        [
          "send",
          [
            "const",
            null,
            "Jekyll"
          ],
          "set_timezone",
          [
            "lvar",
            "value"
          ]
        ],
        null
      ],
      [
        "send",
        [
          "const",
          null,
          "File"
        ],
        "write",
        [
          "str",
          "_config.yml"
        ],
        [
          "send",
          [
            "const",
            null,
            "YAML"
          ],
          "dump",
          [
            "lvar",
            "config"
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have a configuration file with:$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "table"
        ]
      ]
    ],
    [
      "block",
      [
        "send",
        [
          "send",
          [
            "lvar",
            "table"
          ],
          "hashes"
        ],
        "each"
      ],
      [
        "args",
        [
          "procarg0",
          [
            "arg",
            "row"
          ]
        ]
      ],
      [
        "send",
        null,
        "step",
        [
          "dstr",
          [
            "str",
            "I have a configuration file with \""
          ],
          [
            "begin",
            [
              "index",
              [
                "lvar",
                "row"
              ],
              [
                "str",
                "key"
              ]
            ]
          ],
          [
            "str",
            "\" set to \""
          ],
          [
            "begin",
            [
              "index",
              [
                "lvar",
                "row"
              ],
              [
                "str",
                "value"
              ]
            ]
          ],
          [
            "str",
            "\""
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have a configuration file with \"([^\\\"]*)\" set to:$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "key"
      ],
      [
        "arg",
        "table"
      ]
    ],
    [
      "block",
      [
        "send",
        [
          "const",
          null,
          "File"
        ],
        "open",
        [
          "str",
          "_config.yml"
        ],
        [
          "str",
          "w"
        ]
      ],
      [
        "args",
        [
          "procarg0",
          [
            "arg",
            "f"
          ]
        ]
      ],
      [
        "begin",
        [
          "send",
          [
            "lvar",
            "f"
          ],
          "write",
          [
            "dstr",
            [
              "begin",
              [
                "lvar",
                "key"
              ]
            ],
            [
              "str",
              ":\n"
            ]
          ]
        ],
        [
          "block",
          [
            "send",
            [
              "send",
              [
                "lvar",
                "table"
              ],
              "hashes"
            ],
            "each"
          ],
          [
            "args",
            [
              "procarg0",
              [
                "arg",
                "row"
              ]
            ]
          ],
          [
            "send",
            [
              "lvar",
              "f"
            ],
            "write",
            [
              "dstr",
              [
                "str",
                "- "
              ],
              [
                "begin",
                [
                  "index",
                  [
                    "lvar",
                    "row"
                  ],
                  [
                    "str",
                    "value"
                  ]
                ]
              ],
              [
                "str",
                "\n"
              ]
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I have fixture collections(?: in \"(.*)\" directory)?$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "directory"
        ]
      ]
    ],
    [
      "begin",
      [
        "lvasgn",
        "collections_dir",
        [
          "send",
          [
            "const",
            null,
            "File"
          ],
          "join",
          [
            "send",
            null,
            "source_dir"
          ],
          [
            "send",
            [
              "lvar",
              "directory"
            ],
            "to_s"
          ]
        ]
      ],
      [
        "send",
        [
          "const",
          null,
          "FileUtils"
        ],
        "cp_r",
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "source_dir"
          ],
          "join",
          [
            "str",
            "test"
          ],
          [
            "str",
            "source"
          ],
          [
            "str",
            "_methods"
          ]
        ],
        [
          "lvar",
          "collections_dir"
        ]
      ],
      [
        "send",
        [
          "const",
          null,
          "FileUtils"
        ],
        "cp_r",
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "source_dir"
          ],
          "join",
          [
            "str",
            "test"
          ],
          [
            "str",
            "source"
          ],
          [
            "str",
            "_thanksgiving"
          ]
        ],
        [
          "lvar",
          "collections_dir"
        ]
      ],
      [
        "send",
        [
          "const",
          null,
          "FileUtils"
        ],
        "cp_r",
        [
          "send",
          [
            "send",
            [
              "const",
              null,
              "Paths"
            ],
            "source_dir"
          ],
          "join",
          [
            "str",
            "test"
          ],
          [
            "str",
            "source"
          ],
          [
            "str",
            "_tutorials"
          ]
        ],
        [
          "lvar",
          "collections_dir"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Given",
      [
        "regexp",
        [
          "str",
          "^I wait (\\d+) second(s?)$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "time"
      ],
      [
        "arg",
        "_"
      ]
    ],
    [
      "send",
      null,
      "sleep",
      [
        "send",
        [
          "lvar",
          "time"
        ],
        "to_f"
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "When",
      [
        "regexp",
        [
          "str",
          "^I run jekyll(.*)$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "args"
        ]
      ]
    ],
    [
      "begin",
      [
        "send",
        null,
        "run_jekyll",
        [
          "lvar",
          "args"
        ]
      ],
      [
        "if",
        [
          "or",
          [
            "send",
            [
              "lvar",
              "args"
            ],
            "include?",
            [
              "str",
              "--verbose"
            ]
          ],
          [
            "index",
            [
              "const",
              null,
              "ENV"
            ],
            [
              "str",
              "DEBUG"
            ]
          ]
        ],
        [
          "send",
          null,
          "warn",
          [
            "dstr",
            [
              "str",
              "\n"
            ],
            [
              "begin",
              [
                "send",
                null,
                "jekyll_run_output"
              ]
            ],
            [
              "str",
              "\n"
            ]
          ]
        ],
        null
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "When",
      [
        "regexp",
        [
          "str",
          "^I run bundle(.*)$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "args"
        ]
      ]
    ],
    [
      "begin",
      [
        "send",
        null,
        "run_bundle",
        [
          "lvar",
          "args"
        ]
      ],
      [
        "if",
        [
          "or",
          [
            "send",
            [
              "lvar",
              "args"
            ],
            "include?",
            [
              "str",
              "--verbose"
            ]
          ],
          [
            "index",
            [
              "const",
              null,
              "ENV"
            ],
            [
              "str",
              "DEBUG"
            ]
          ]
        ],
        [
          "send",
          null,
          "warn",
          [
            "dstr",
            [
              "str",
              "\n"
            ],
            [
              "begin",
              [
                "send",
                null,
                "jekyll_run_output"
              ]
            ],
            [
              "str",
              "\n"
            ]
          ]
        ],
        null
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "When",
      [
        "regexp",
        [
          "str",
          "^I run gem(.*)$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "args"
        ]
      ]
    ],
    [
      "begin",
      [
        "send",
        null,
        "run_rubygem",
        [
          "lvar",
          "args"
        ]
      ],
      [
        "if",
        [
          "or",
          [
            "send",
            [
              "lvar",
              "args"
            ],
            "include?",
            [
              "str",
              "--verbose"
            ]
          ],
          [
            "index",
            [
              "const",
              null,
              "ENV"
            ],
            [
              "str",
              "DEBUG"
            ]
          ]
        ],
        [
          "send",
          null,
          "warn",
          [
            "dstr",
            [
              "str",
              "\n"
            ],
            [
              "begin",
              [
                "send",
                null,
                "jekyll_run_output"
              ]
            ],
            [
              "str",
              "\n"
            ]
          ]
        ],
        null
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "When",
      [
        "regexp",
        [
          "str",
          "^I run git add .$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args"
    ],
    [
      "send",
      null,
      "run_in_shell",
      [
        "str",
        "git"
      ],
      [
        "str",
        "add"
      ],
      [
        "str",
        "."
      ],
      [
        "str",
        "--verbose"
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "When",
      [
        "regexp",
        [
          "str",
          "^I decide to build the theme gem$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args"
    ],
    [
      "begin",
      [
        "send",
        [
          "const",
          null,
          "Dir"
        ],
        "chdir",
        [
          "send",
          [
            "const",
            null,
            "Paths"
          ],
          "theme_gem_dir"
        ]
      ],
      [
        "block",
        [
          "send",
          [
            "array",
            [
              "str",
              "_includes/blank.html"
            ],
            [
              "str",
              "_sass/blank.scss"
            ],
            [
              "str",
              "assets/blank.scss"
            ],
            [
              "str",
              "_config.yml"
            ]
          ],
          "each"
        ],
        [
          "args",
          [
            "procarg0",
            [
              "arg",
              "filename"
            ]
          ]
        ],
        [
          "send",
          [
            "const",
            null,
            "File"
          ],
          "new",
          [
            "lvar",
            "filename"
          ],
          [
            "str",
            "w"
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "When",
      [
        "regexp",
        [
          "str",
          "^I change \"(.*)\" to contain \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "file"
      ],
      [
        "arg",
        "text"
      ]
    ],
    [
      "block",
      [
        "send",
        [
          "const",
          null,
          "File"
        ],
        "open",
        [
          "lvar",
          "file"
        ],
        [
          "str",
          "a"
        ]
      ],
      [
        "args",
        [
          "procarg0",
          [
            "arg",
            "f"
          ]
        ]
      ],
      [
        "send",
        [
          "lvar",
          "f"
        ],
        "write",
        [
          "lvar",
          "text"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "When",
      [
        "regexp",
        [
          "str",
          "^I delete the file \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "file"
        ]
      ]
    ],
    [
      "send",
      [
        "const",
        null,
        "File"
      ],
      "delete",
      [
        "lvar",
        "file"
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^the (.*) directory should +(not )?exist$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "dir"
      ],
      [
        "arg",
        "negative"
      ]
    ],
    [
      "if",
      [
        "send",
        [
          "lvar",
          "negative"
        ],
        "nil?"
      ],
      [
        "send",
        [
          "send",
          null,
          "expect",
          [
            "send",
            [
              "const",
              null,
              "Pathname"
            ],
            "new",
            [
              "lvar",
              "dir"
            ]
          ]
        ],
        "to",
        [
          "send",
          null,
          "exist"
        ]
      ],
      [
        "send",
        [
          "send",
          null,
          "expect",
          [
            "send",
            [
              "const",
              null,
              "Pathname"
            ],
            "new",
            [
              "lvar",
              "dir"
            ]
          ]
        ],
        "to_not",
        [
          "send",
          null,
          "exist"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should (not )?see \"(.*)\" in \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "negative"
      ],
      [
        "arg",
        "text"
      ],
      [
        "arg",
        "file"
      ]
    ],
    [
      "begin",
      [
        "send",
        null,
        "step",
        [
          "dstr",
          [
            "str",
            "the \""
          ],
          [
            "begin",
            [
              "lvar",
              "file"
            ]
          ],
          [
            "str",
            "\" file should exist"
          ]
        ]
      ],
      [
        "lvasgn",
        "regexp",
        [
          "send",
          [
            "const",
            null,
            "Regexp"
          ],
          "new",
          [
            "lvar",
            "text"
          ],
          [
            "const",
            [
              "const",
              null,
              "Regexp"
            ],
            "MULTILINE"
          ]
        ]
      ],
      [
        "if",
        [
          "or",
          [
            "send",
            [
              "lvar",
              "negative"
            ],
            "nil?"
          ],
          [
            "send",
            [
              "lvar",
              "negative"
            ],
            "empty?"
          ]
        ],
        [
          "send",
          [
            "send",
            null,
            "expect",
            [
              "send",
              null,
              "file_contents",
              [
                "lvar",
                "file"
              ]
            ]
          ],
          "to",
          [
            "send",
            null,
            "match",
            [
              "lvar",
              "regexp"
            ]
          ]
        ],
        [
          "send",
          [
            "send",
            null,
            "expect",
            [
              "send",
              null,
              "file_contents",
              [
                "lvar",
                "file"
              ]
            ]
          ],
          "not_to",
          [
            "send",
            null,
            "match",
            [
              "lvar",
              "regexp"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should (not )?see \"(.*)\" in \"(.*)\" if on Windows$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "negative"
      ],
      [
        "arg",
        "text"
      ],
      [
        "arg",
        "file"
      ]
    ],
    [
      "begin",
      [
        "send",
        null,
        "step",
        [
          "dstr",
          [
            "str",
            "the \""
          ],
          [
            "begin",
            [
              "lvar",
              "file"
            ]
          ],
          [
            "str",
            "\" file should exist"
          ]
        ]
      ],
      [
        "lvasgn",
        "regexp",
        [
          "send",
          [
            "const",
            null,
            "Regexp"
          ],
          "new",
          [
            "lvar",
            "text"
          ],
          [
            "const",
            [
              "const",
              null,
              "Regexp"
            ],
            "MULTILINE"
          ]
        ]
      ],
      [
        "if",
        [
          "or",
          [
            "send",
            [
              "lvar",
              "negative"
            ],
            "nil?"
          ],
          [
            "send",
            [
              "lvar",
              "negative"
            ],
            "empty?"
          ]
        ],
        [
          "if",
          [
            "send",
            [
              "const",
              [
                "const",
                [
                  "const",
                  null,
                  "Jekyll"
                ],
                "Utils"
              ],
              "Platforms"
            ],
            "really_windows?"
          ],
          [
            "send",
            [
              "send",
              null,
              "expect",
              [
                "send",
                null,
                "file_contents",
                [
                  "lvar",
                  "file"
                ]
              ]
            ],
            "to",
            [
              "send",
              null,
              "match",
              [
                "lvar",
                "regexp"
              ]
            ]
          ],
          [
            "send",
            [
              "send",
              null,
              "expect",
              [
                "send",
                null,
                "file_contents",
                [
                  "lvar",
                  "file"
                ]
              ]
            ],
            "not_to",
            [
              "send",
              null,
              "match",
              [
                "lvar",
                "regexp"
              ]
            ]
          ]
        ],
        null
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should (not )?see \"(.*)\" in \"(.*)\" unless Windows$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "negative"
      ],
      [
        "arg",
        "text"
      ],
      [
        "arg",
        "file"
      ]
    ],
    [
      "begin",
      [
        "send",
        null,
        "step",
        [
          "dstr",
          [
            "str",
            "the \""
          ],
          [
            "begin",
            [
              "lvar",
              "file"
            ]
          ],
          [
            "str",
            "\" file should exist"
          ]
        ]
      ],
      [
        "lvasgn",
        "regexp",
        [
          "send",
          [
            "const",
            null,
            "Regexp"
          ],
          "new",
          [
            "lvar",
            "text"
          ],
          [
            "const",
            [
              "const",
              null,
              "Regexp"
            ],
            "MULTILINE"
          ]
        ]
      ],
      [
        "if",
        [
          "or",
          [
            "send",
            [
              "lvar",
              "negative"
            ],
            "nil?"
          ],
          [
            "send",
            [
              "lvar",
              "negative"
            ],
            "empty?"
          ]
        ],
        [
          "if",
          [
            "send",
            [
              "const",
              [
                "const",
                [
                  "const",
                  null,
                  "Jekyll"
                ],
                "Utils"
              ],
              "Platforms"
            ],
            "really_windows?"
          ],
          [
            "send",
            [
              "send",
              null,
              "expect",
              [
                "send",
                null,
                "file_contents",
                [
                  "lvar",
                  "file"
                ]
              ]
            ],
            "not_to",
            [
              "send",
              null,
              "match",
              [
                "lvar",
                "regexp"
              ]
            ]
          ],
          [
            "send",
            [
              "send",
              null,
              "expect",
              [
                "send",
                null,
                "file_contents",
                [
                  "lvar",
                  "file"
                ]
              ]
            ],
            "to",
            [
              "send",
              null,
              "match",
              [
                "lvar",
                "regexp"
              ]
            ]
          ]
        ],
        null
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should see date \"(.*)\" in \"(.*)\" unless Windows$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "text"
      ],
      [
        "arg",
        "file"
      ]
    ],
    [
      "begin",
      [
        "send",
        null,
        "step",
        [
          "dstr",
          [
            "str",
            "the \""
          ],
          [
            "begin",
            [
              "lvar",
              "file"
            ]
          ],
          [
            "str",
            "\" file should exist"
          ]
        ]
      ],
      [
        "lvasgn",
        "regexp",
        [
          "send",
          [
            "const",
            null,
            "Regexp"
          ],
          "new",
          [
            "lvar",
            "text"
          ]
        ]
      ],
      [
        "if",
        [
          "and",
          [
            "send",
            [
              "const",
              [
                "const",
                [
                  "const",
                  null,
                  "Jekyll"
                ],
                "Utils"
              ],
              "Platforms"
            ],
            "really_windows?"
          ],
          [
            "send",
            [
              "send",
              null,
              "dst_active?"
            ],
            "!"
          ]
        ],
        [
          "send",
          [
            "send",
            null,
            "expect",
            [
              "send",
              null,
              "file_contents",
              [
                "lvar",
                "file"
              ]
            ]
          ],
          "not_to",
          [
            "send",
            null,
            "match",
            [
              "lvar",
              "regexp"
            ]
          ]
        ],
        [
          "send",
          [
            "send",
            null,
            "expect",
            [
              "send",
              null,
              "file_contents",
              [
                "lvar",
                "file"
              ]
            ]
          ],
          "to",
          [
            "send",
            null,
            "match",
            [
              "lvar",
              "regexp"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should see date \"(.*)\" in \"(.*)\" if on Windows$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "text"
      ],
      [
        "arg",
        "file"
      ]
    ],
    [
      "begin",
      [
        "send",
        null,
        "step",
        [
          "dstr",
          [
            "str",
            "the \""
          ],
          [
            "begin",
            [
              "lvar",
              "file"
            ]
          ],
          [
            "str",
            "\" file should exist"
          ]
        ]
      ],
      [
        "lvasgn",
        "regexp",
        [
          "send",
          [
            "const",
            null,
            "Regexp"
          ],
          "new",
          [
            "lvar",
            "text"
          ]
        ]
      ],
      [
        "if",
        [
          "and",
          [
            "send",
            [
              "const",
              [
                "const",
                [
                  "const",
                  null,
                  "Jekyll"
                ],
                "Utils"
              ],
              "Platforms"
            ],
            "really_windows?"
          ],
          [
            "send",
            [
              "send",
              null,
              "dst_active?"
            ],
            "!"
          ]
        ],
        [
          "send",
          [
            "send",
            null,
            "expect",
            [
              "send",
              null,
              "file_contents",
              [
                "lvar",
                "file"
              ]
            ]
          ],
          "to",
          [
            "send",
            null,
            "match",
            [
              "lvar",
              "regexp"
            ]
          ]
        ],
        [
          "send",
          [
            "send",
            null,
            "expect",
            [
              "send",
              null,
              "file_contents",
              [
                "lvar",
                "file"
              ]
            ]
          ],
          "not_to",
          [
            "send",
            null,
            "match",
            [
              "lvar",
              "regexp"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should see exactly \"(.*)\" in \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "text"
      ],
      [
        "arg",
        "file"
      ]
    ],
    [
      "begin",
      [
        "send",
        null,
        "step",
        [
          "dstr",
          [
            "str",
            "the \""
          ],
          [
            "begin",
            [
              "lvar",
              "file"
            ]
          ],
          [
            "str",
            "\" file should exist"
          ]
        ]
      ],
      [
        "send",
        [
          "send",
          null,
          "expect",
          [
            "send",
            [
              "send",
              null,
              "file_contents",
              [
                "lvar",
                "file"
              ]
            ],
            "strip"
          ]
        ],
        "to",
        [
          "send",
          null,
          "eq",
          [
            "lvar",
            "text"
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should see escaped \"(.*)\" in \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "text"
      ],
      [
        "arg",
        "file"
      ]
    ],
    [
      "send",
      null,
      "step",
      [
        "dstr",
        [
          "str",
          "I should see \""
        ],
        [
          "begin",
          [
            "send",
            [
              "const",
              null,
              "Regexp"
            ],
            "escape",
            [
              "lvar",
              "text"
            ]
          ]
        ],
        [
          "str",
          "\" in \""
        ],
        [
          "begin",
          [
            "lvar",
            "file"
          ]
        ],
        [
          "str",
          "\""
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^the \"(.*)\" file should +(not )?exist$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "file"
      ],
      [
        "arg",
        "negative"
      ]
    ],
    [
      "if",
      [
        "send",
        [
          "lvar",
          "negative"
        ],
        "nil?"
      ],
      [
        "send",
        [
          "send",
          null,
          "expect",
          [
            "send",
            [
              "const",
              null,
              "Pathname"
            ],
            "new",
            [
              "lvar",
              "file"
            ]
          ]
        ],
        "to",
        [
          "send",
          null,
          "exist"
        ]
      ],
      [
        "send",
        [
          "send",
          null,
          "expect",
          [
            "send",
            [
              "const",
              null,
              "Pathname"
            ],
            "new",
            [
              "lvar",
              "file"
            ]
          ]
        ],
        "to_not",
        [
          "send",
          null,
          "exist"
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should see today's time in \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "file"
        ]
      ]
    ],
    [
      "send",
      null,
      "step",
      [
        "dstr",
        [
          "str",
          "I should see \""
        ],
        [
          "begin",
          [
            "send",
            null,
            "seconds_agnostic_time",
            [
              "send",
              [
                "const",
                null,
                "Time"
              ],
              "now"
            ]
          ]
        ],
        [
          "str",
          "\" in \""
        ],
        [
          "begin",
          [
            "lvar",
            "file"
          ]
        ],
        [
          "str",
          "\""
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should see today's date in \"(.*)\"$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "procarg0",
        [
          "arg",
          "file"
        ]
      ]
    ],
    [
      "send",
      null,
      "step",
      [
        "dstr",
        [
          "str",
          "I should see \""
        ],
        [
          "begin",
          [
            "send",
            [
              "const",
              null,
              "Date"
            ],
            "today"
          ]
        ],
        [
          "str",
          "\" in \""
        ],
        [
          "begin",
          [
            "lvar",
            "file"
          ]
        ],
        [
          "str",
          "\""
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should (not )?see \"(.*)\" in the build output$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args",
      [
        "arg",
        "negative"
      ],
      [
        "arg",
        "text"
      ]
    ],
    [
      "if",
      [
        "or",
        [
          "send",
          [
            "lvar",
            "negative"
          ],
          "nil?"
        ],
        [
          "send",
          [
            "lvar",
            "negative"
          ],
          "empty?"
        ]
      ],
      [
        "send",
        [
          "send",
          null,
          "expect",
          [
            "send",
            null,
            "jekyll_run_output"
          ]
        ],
        "to",
        [
          "send",
          null,
          "match",
          [
            "send",
            [
              "const",
              null,
              "Regexp"
            ],
            "new",
            [
              "lvar",
              "text"
            ]
          ]
        ]
      ],
      [
        "send",
        [
          "send",
          null,
          "expect",
          [
            "send",
            null,
            "jekyll_run_output"
          ]
        ],
        "not_to",
        [
          "send",
          null,
          "match",
          [
            "send",
            [
              "const",
              null,
              "Regexp"
            ],
            "new",
            [
              "lvar",
              "text"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should get an updated git index$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args"
    ],
    [
      "begin",
      [
        "lvasgn",
        "index",
        [
          "array",
          [
            "str",
            ".gitignore"
          ],
          [
            "str",
            "Gemfile"
          ],
          [
            "str",
            "LICENSE.txt"
          ],
          [
            "str",
            "README.md"
          ],
          [
            "str",
            "_config.yml"
          ],
          [
            "str",
            "_includes/blank.html"
          ],
          [
            "str",
            "_layouts/default.html"
          ],
          [
            "str",
            "_layouts/page.html"
          ],
          [
            "str",
            "_layouts/post.html"
          ],
          [
            "str",
            "_sass/blank.scss"
          ],
          [
            "str",
            "assets/blank.scss"
          ],
          [
            "str",
            "my-cool-theme.gemspec"
          ]
        ]
      ],
      [
        "block",
        [
          "send",
          [
            "lvar",
            "index"
          ],
          "each"
        ],
        [
          "args",
          [
            "procarg0",
            [
              "arg",
              "file"
            ]
          ]
        ],
        [
          "send",
          [
            "send",
            null,
            "expect",
            [
              "send",
              null,
              "jekyll_run_output"
            ]
          ],
          "to",
          [
            "send",
            null,
            "match",
            [
              "lvar",
              "file"
            ]
          ]
        ]
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should get a zero exit(?:-| )status$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args"
    ],
    [
      "send",
      null,
      "step",
      [
        "str",
        "I should see \"EXIT STATUS: 0\" in the build output"
      ]
    ]
  ],
  [
    "block",
    [
      "send",
      null,
      "Then",
      [
        "regexp",
        [
          "str",
          "^I should get a non-zero exit(?:-| )status$"
        ],
        [
          "regopt"
        ]
      ]
    ],
    [
      "args"
    ],
    [
      "send",
      null,
      "step",
      [
        "str",
        "I should not see \"EXIT STATUS: 0\" in the build output"
      ]
    ]
  ]
]